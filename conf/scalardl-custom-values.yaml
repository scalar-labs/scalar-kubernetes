envoy:
  replicaCount: 3

  prometheusRule:
    enabled: false

  serviceMonitor:
    enabled: false

  grafanaDashboard:
    enabled: false

  service:
    type: LoadBalancer
    annotations:
      service.beta.kubernetes.io/azure-load-balancer-internal: "true"
      service.beta.kubernetes.io/aws-load-balancer-internal: "true"
      service.beta.kubernetes.io/aws-load-balancer-type: "nlb"

  tolerations:
    - effect: NoSchedule
      key: scalar-labs.com/dedicated-node
      operator: Equal
      value: scalardl-ledger

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: scalar-labs.com/dedicated-node
                operator: In
                values:
                  - scalardl-ledger
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - scalardl
              - key: app.kubernetes.io/app
                operator: In
                values:
                  - envoy
          topologyKey: kubernetes.io/hostname

  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 300m
      memory: 328Mi

ledger:
  replicaCount: 3

  imagePullSecrets:
    - name: reg-docker-secrets

  ledgerProperties: |
    # # Cosmo DB for NoSQL
    # # The Cosmos DB for NoSQL URI
    # scalar.db.contact_points=<COSMOS_DB_FOR_NOSQL_URI>
    #
    # # The Cosmos DB for NoSQL key
    # scalar.db.password=<COSMOS_DB_FOR_NOSQL_KEY>
    #
    # # Cosmos DB for NoSQL storage implementation
    # scalar.db.storage=cosmos

    # # DynamoDB
    # # The AWS region
    # scalar.db.contact_points=<REGION>
    #
    # # The AWS access key ID and secret access key
    # scalar.db.username=<ACCESS_KEY_ID>
    # scalar.db.password=<SECRET_ACCESS_KEY>
    #
    # # DynamoDB storage implementation
    # scalar.db.storage=dynamo

    # # Ledger configurations to use Auditor
    # scalar.dl.ledger.proof.enabled=true
    # scalar.dl.ledger.auditor.enabled=true
    # scalar.dl.ledger.proof.private_key_path=/keys/private-key

  extraVolumes:
    - name: ledger-keys
      secret:
        secretName: ledger-keys

  extraVolumeMounts:
    - name: ledger-keys
      mountPath: /keys
      readOnly: true

  prometheusRule:
    enabled: false

  serviceMonitor:
    enabled: false

  grafanaDashboard:
    enabled: false

  nodeSelector: {}

  tolerations:
    - effect: NoSchedule
      key: scalar-labs.com/dedicated-node
      operator: Equal
      value: scalardl-ledger

  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: scalar-labs.com/dedicated-node
                operator: In
                values:
                  - scalardl-ledger
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - scalardl
              - key: app.kubernetes.io/app
                operator: In
                values:
                  - ledger
          topologyKey: kubernetes.io/hostname

  resources:
    requests:
      cpu: 2000m
      memory: 4Gi
    limits:
      cpu: 2000m
      memory: 4Gi
